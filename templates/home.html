{% extends 'base.html' %} {% block content %}

<!-- Hero 區 -->
<section class="text-center py-12 bg-gray-50">
  <h1 class="text-4xl font-extrabold text-gray-800">
    {% if lang == "en" %}
      Discover & Fall in Love
    {% else %}
      探索世界，發現愛
    {% endif %}
  </h1>
  <p class="mt-2 text-lg text-gray-500">
    {% if lang == "en" %}
      TOURING THE WORLD SINCE 1978
    {% else %}
      專業旅遊帶你玩遍全球
    {% endif %}
  </p>
</section>

<!-- 搜尋表單 -->
<section class="py-8">
  <div class="max-w-5xl mx-auto bg-white p-6 shadow-md rounded-md">
    <form
      method="get"
      action="{% url 'search' %}"
      class="grid grid-cols-1 sm:grid-cols-4 gap-4"
    >
      <input
        type="text"
        name="keywords"
        placeholder="{% if lang == 'en' %}Keywords{% else %}輸入關鍵字{% endif %}"
        class="input-field"
      />
      <input
        type="text"
        name="days"
        placeholder="{% if lang == 'en' %}Days{% else %}行程天數{% endif %}"
        class="input-field"
      />
      <input
        type="text"
        name="departure_city"
        placeholder="{% if lang == 'en' %}Departure{% else %}出發地{% endif %}"
        class="input-field"
      />
      <input
        type="text"
        name="departure_date"
        placeholder="{% if lang == 'en' %}Date{% else %}出發日期{% endif %}"
        class="input-field"
      />
      <div class="sm:col-span-4">
        <button type="submit" class="btn-primary w-full sm:w-auto">
          {% if lang == 'en' %}Search{% else %}搜尋行程{% endif %}
        </button>
      </div>
    </form>
  </div>
</section>

<!-- 多分類區塊 -->
{% for section in category_sections %}
  <section class="py-10">
    <div class="max-w-6xl mx-auto px-4">
      <h2 class="text-2xl font-bold mb-4 border-b border-gray-300 pb-2">
        {% if lang == "en" %}
          {{ section.category.name_en }}
        {% else %}
          {{ section.category.name_zh_tw }}
        {% endif %}
      </h2>
      <div class="grid gap-6 sm:grid-cols-2 lg:grid-cols-3">
        {% for tour in section.tours %}
          <div class="bg-white shadow rounded overflow-hidden">
            <img src="{{ tour.image.url }}" alt="" class="w-full h-40 object-cover" />
            <div class="p-4">
              <h3 class="font-semibold text-lg">
                {% if lang == "en" %}
                  {{ tour.title_en }}
                {% else %}
                  {{ tour.title_zh_tw }}
                {% endif %}
              </h3>
              <p class="text-sm text-gray-600">
                {% if lang == "en" %}
                  {{ tour.desc_en|truncatechars:80 }}
                {% else %}
                  {{ tour.desc_zh_tw|truncatechars:80 }}
                {% endif %}
              </p>
              <div class="mt-2 text-yellow-600 font-bold">
                ${{ tour.price }}
              </div>
              <a href="{% url 'tour_detail' tour.id %}" class="inline-block mt-3 text-blue-600 hover:underline">
                {% if lang == "en" %}Details{% else %}查看詳情{% endif %}
              </a>
              <form action="{% url 'cart:add_to_cart' tour.id %}" method="post" class="mt-2">
                {% csrf_token %}
                <button type="submit" class="text-sm text-white bg-green-600 px-3 py-1 rounded hover:bg-green-700">
                  {% if lang == "en" %}Add to Cart{% else %}加入購物車{% endif %}
                </button>
              </form>
            </div>
          </div>
        {% empty %}
          <p class="text-gray-500">
            {% if lang == "en" %}No tours in this category.{% else %}此分類暫無行程{% endif %}
          </p>
        {% endfor %}
      </div>
      <div class="mt-2 text-right">
        <a href="#" class="text-blue-500 hover:underline">
          {% if lang == "en" %}View more{% else %}查看更多{% endif %}
        </a>
      </div>
    </div>
  </section>
{% endfor %}

